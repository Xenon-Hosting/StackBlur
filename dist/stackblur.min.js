!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).StackBlur={})}(this,(function(t){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(a=n.key,o=void 0,"symbol"==typeof(o=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(a,"string"))?o:String(o)),n)}var a,o;
/**
  * StackBlur - a fast almost Gaussian Blur For Canvas
  *
  * In case you find this class useful - especially in commercial projects -
  * I am not totally unhappy for a small donation to my PayPal account
  * mario@quasimondo.de
  *
  * Or support me on flattr:
  * {@link https://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript}.
  *
  * @module StackBlur
  * @author Mario Klingemann
  * Contact: mario@quasimondo.com
  * Website: {@link http://www.quasimondo.com/StackBlurForCanvas/StackBlurDemo.html}
  * Twitter: @quasimondo
  *
  * @copyright (c) 2010 Mario Klingemann
  *
  * Permission is hereby granted, free of charge, to any person
  * obtaining a copy of this software and associated documentation
  * files (the "Software"), to deal in the Software without
  * restriction, including without limitation the rights to use,
  * copy, modify, merge, publish, distribute, sublicense, and/or sell
  * copies of the Software, and to permit persons to whom the
  * Software is furnished to do so, subject to the following
  * conditions:
  *
  * The above copyright notice and this permission notice shall be
  * included in all copies or substantial portions of the Software.
  *
  * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
  * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
  * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
  * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
  * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
  * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
  * OTHER DEALINGS IN THE SOFTWARE.
  */}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var a=[512,128,114,64,82,114,335,64,405,82,271,114,97,335,73,64,227,405,91,82,149,271,124,114,105,97,90,335,78,73,273,64,241,227,107,405,383,91,345,82,78,149,71,271,259,124,475,114,437,105,101,97,187,90,347,335,323,78,151,73,141,273,265,64,497,241,117,227,441,107,417,405,197,383,373,91,177,345,337,82,80,78,305,149,291,71,139,271,265,259,507,124,485,475,465,114,223,437,107,105,103,101,99,97,381,187,367,90,177,347,341,335,329,323,159,78,307,151,297,73,287,141,139,273,269,265,261,64,505,497,489,241,475,117,461,227,447,441,435,107,211,417,411,405,399,197,389,383,189,373,92,91,359,177,175,345,341,337,83,82,81,80,79,78,309,305,301,149,147,291,287,71,281,139,137,271,67,265,131,259,257,507,501,124,491,485,120,475,235,465,115,114,451,223,221,437,433,107,106,105,104,103,102,101,100,99,98,97,385,381,377,187,185,367,363,90,357,177,175,347,86,341,169,335,83,329,163,323,80,159,315,78,155,307,76,151,299,297,147,73,289,287,285,141,70,139,275,273,271,269,267,265,263,261,259,64,509,505,501,497,493,489,243,241,239,475,471,117,116,461,457,227,451,447,111,441,219,435,108,107,425,211,419,417,207,411,102,405,201,399,397,197,391,389,193,383,381,189,94,373,371,92,183,91,361,359,357,177,88,175,347,345,343,341,339,337,167,83,165,82,163,81,161,80,159,79,157,78,155,309,307,305,303,301,299,149,74,147,73,291,289,287,143,71,141,281,279,139,69,137,273,271,135,67,267,265,66,131,261,259,129,257,255,507,126,501,499,124,493,491,122,485,483,120,239,475,473,235,117,465,463,115,229,114,453,451,449,223,111,221,439,437,435,433,431,107,213,106,211,105,209],o=[9,9,10,10,11,12,14,12,15,13,15,14,14,16,14,14,16,17,15,15,16,17,16,16,16,16,16,18,16,16,18,16,18,18,17,19,19,17,19,17,17,18,17,19,19,18,20,18,20,18,18,18,19,18,20,20,20,18,19,18,19,20,20,18,21,20,19,20,21,19,21,21,20,21,21,19,20,21,21,19,19,19,21,20,21,19,20,21,21,21,22,20,22,22,22,20,21,22,20,20,20,20,20,20,22,21,22,20,21,22,22,22,22,22,21,20,22,21,22,20,22,21,21,22,22,22,22,20,23,23,23,22,23,21,23,22,23,23,23,21,22,23,23,23,23,22,23,23,22,23,21,21,23,22,22,23,23,23,21,21,21,21,21,21,23,23,23,22,22,23,23,21,23,22,22,23,21,23,22,23,23,24,24,22,24,24,22,24,23,24,22,22,24,23,23,24,24,22,22,22,22,22,22,22,22,22,22,22,24,24,24,23,23,24,24,22,24,23,23,24,22,24,23,24,22,24,23,24,22,23,24,22,23,24,22,23,24,24,23,22,24,24,24,23,22,23,24,24,24,24,24,24,24,24,24,22,25,25,25,25,25,25,24,24,24,25,25,23,23,25,25,24,25,25,23,25,24,25,23,23,25,24,25,25,24,25,23,25,24,25,25,24,25,25,24,25,25,24,23,25,25,23,24,23,25,25,25,24,23,24,25,25,25,25,25,25,24,23,24,23,24,23,24,23,24,23,24,23,24,25,25,25,25,25,25,24,23,24,23,25,25,25,24,23,24,25,25,24,23,24,25,25,24,23,25,25,23,24,25,25,24,25,25,26,24,26,26,24,26,26,24,26,26,24,25,26,26,25,24,26,26,24,25,24,26,26,26,25,24,25,26,26,26,26,26,24,25,24,25,24,25];function i(t,r,n,a,o){if("string"==typeof t&&(t=document.getElementById(t)),!t||"object"!==e(t)||!("getContext"in t))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var i=t.getContext("2d");try{return i.getImageData(r,n,a,o)}catch(t){throw new Error("unable to access image data: "+t)}}function f(t,e,r,n,a,o){if(!(isNaN(o)||o<1)){o|=0;var f=i(t,e,r,n,a);f=u(f,e,r,n,a,o),t.getContext("2d").putImageData(f,e,r)}}function u(t,e,r,n,i,f){for(var u,l=t.data,g=2*f+1,v=n-1,b=i-1,s=f+1,y=s*(s+1)/2,p=new c,d=p,x=1;x<g;x++)d=d.next=new c,x===s&&(u=d);d.next=p;for(var m=null,h=null,w=0,B=0,S=a[f],C=o[f],E=0;E<i;E++){d=p;for(var j=l[B],I=l[B+1],N=l[B+2],R=l[B+3],D=0;D<s;D++)d.r=j,d.g=I,d.b=N,d.a=R,d=d.next;for(var G=0,P=0,T=0,k=0,A=s*j,O=s*I,W=s*N,H=s*R,_=y*j,M=y*I,q=y*N,z=y*R,F=1;F<s;F++){var J=B+((v<F?v:F)<<2),K=l[J],L=l[J+1],Q=l[J+2],U=l[J+3],V=s-F;_+=(d.r=K)*V,M+=(d.g=L)*V,q+=(d.b=Q)*V,z+=(d.a=U)*V,G+=K,P+=L,T+=Q,k+=U,d=d.next}m=p,h=u;for(var X=0;X<n;X++){var Y=z*S>>C;if(l[B+3]=Y,0!==Y){var Z=255/Y;l[B]=(_*S>>C)*Z,l[B+1]=(M*S>>C)*Z,l[B+2]=(q*S>>C)*Z}else l[B]=l[B+1]=l[B+2]=0;_-=A,M-=O,q-=W,z-=H,A-=m.r,O-=m.g,W-=m.b,H-=m.a;var $=X+f+1;$=w+($<v?$:v)<<2,_+=G+=m.r=l[$],M+=P+=m.g=l[$+1],q+=T+=m.b=l[$+2],z+=k+=m.a=l[$+3],m=m.next;var tt=h,et=tt.r,rt=tt.g,nt=tt.b,at=tt.a;A+=et,O+=rt,W+=nt,H+=at,G-=et,P-=rt,T-=nt,k-=at,h=h.next,B+=4}w+=n}for(var ot=0;ot<n;ot++){var it=l[B=ot<<2],ft=l[B+1],ut=l[B+2],lt=l[B+3],gt=s*it,ct=s*ft,vt=s*ut,bt=s*lt,st=y*it,yt=y*ft,pt=y*ut,dt=y*lt;d=p;for(var xt=0;xt<s;xt++)d.r=it,d.g=ft,d.b=ut,d.a=lt,d=d.next;for(var mt=n,ht=0,wt=0,Bt=0,St=0,Ct=1;Ct<=f;Ct++){B=mt+ot<<2;var Et=s-Ct;st+=(d.r=it=l[B])*Et,yt+=(d.g=ft=l[B+1])*Et,pt+=(d.b=ut=l[B+2])*Et,dt+=(d.a=lt=l[B+3])*Et,St+=it,ht+=ft,wt+=ut,Bt+=lt,d=d.next,Ct<b&&(mt+=n)}B=ot,m=p,h=u;for(var jt=0;jt<i;jt++){var It=B<<2;l[It+3]=lt=dt*S>>C,lt>0?(lt=255/lt,l[It]=(st*S>>C)*lt,l[It+1]=(yt*S>>C)*lt,l[It+2]=(pt*S>>C)*lt):l[It]=l[It+1]=l[It+2]=0,st-=gt,yt-=ct,pt-=vt,dt-=bt,gt-=m.r,ct-=m.g,vt-=m.b,bt-=m.a,It=ot+((It=jt+s)<b?It:b)*n<<2,st+=St+=m.r=l[It],yt+=ht+=m.g=l[It+1],pt+=wt+=m.b=l[It+2],dt+=Bt+=m.a=l[It+3],m=m.next,gt+=it=h.r,ct+=ft=h.g,vt+=ut=h.b,bt+=lt=h.a,St-=it,ht-=ft,wt-=ut,Bt-=lt,h=h.next,B+=n}}return t}function l(t,e,r,n,a,o){if(!(isNaN(o)||o<1)){o|=0;var f=i(t,e,r,n,a);f=g(f,e,r,n,a,o),t.getContext("2d").putImageData(f,e,r)}}function g(t,e,r,n,i,f){for(var u,l=t.data,g=2*f+1,v=n-1,b=i-1,s=f+1,y=s*(s+1)/2,p=new c,d=p,x=1;x<g;x++)d=d.next=new c,x===s&&(u=d);d.next=p;for(var m,h,w=null,B=null,S=a[f],C=o[f],E=0,j=0,I=0;I<i;I++){var N=l[j],R=l[j+1],D=l[j+2],G=s*N,P=s*R,T=s*D,k=y*N,A=y*R,O=y*D;d=p;for(var W=0;W<s;W++)d.r=N,d.g=R,d.b=D,d=d.next;for(var H=0,_=0,M=0,q=1;q<s;q++)m=j+((v<q?v:q)<<2),k+=(d.r=N=l[m])*(h=s-q),A+=(d.g=R=l[m+1])*h,O+=(d.b=D=l[m+2])*h,H+=N,_+=R,M+=D,d=d.next;w=p,B=u;for(var z=0;z<n;z++)l[j]=k*S>>C,l[j+1]=A*S>>C,l[j+2]=O*S>>C,k-=G,A-=P,O-=T,G-=w.r,P-=w.g,T-=w.b,m=E+((m=z+f+1)<v?m:v)<<2,k+=H+=w.r=l[m],A+=_+=w.g=l[m+1],O+=M+=w.b=l[m+2],w=w.next,G+=N=B.r,P+=R=B.g,T+=D=B.b,H-=N,_-=R,M-=D,B=B.next,j+=4;E+=n}for(var F=0;F<n;F++){var J=l[j=F<<2],K=l[j+1],L=l[j+2],Q=s*J,U=s*K,V=s*L,X=y*J,Y=y*K,Z=y*L;d=p;for(var $=0;$<s;$++)d.r=J,d.g=K,d.b=L,d=d.next;for(var tt=0,et=0,rt=0,nt=1,at=n;nt<=f;nt++)j=at+F<<2,X+=(d.r=J=l[j])*(h=s-nt),Y+=(d.g=K=l[j+1])*h,Z+=(d.b=L=l[j+2])*h,tt+=J,et+=K,rt+=L,d=d.next,nt<b&&(at+=n);j=F,w=p,B=u;for(var ot=0;ot<i;ot++)l[m=j<<2]=X*S>>C,l[m+1]=Y*S>>C,l[m+2]=Z*S>>C,X-=Q,Y-=U,Z-=V,Q-=w.r,U-=w.g,V-=w.b,m=F+((m=ot+s)<b?m:b)*n<<2,X+=tt+=w.r=l[m],Y+=et+=w.g=l[m+1],Z+=rt+=w.b=l[m+2],w=w.next,Q+=J=B.r,U+=K=B.g,V+=L=B.b,tt-=J,et-=K,rt-=L,B=B.next,j+=n}return t}var c=n((function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}));t.BlurStack=c,t.canvasRGB=l,t.canvasRGBA=f,t.image=function(t,e,r,n,a,o){if("string"==typeof t&&(t=document.getElementById(t)),t&&"naturalWidth"in t){var i=a?"offset":"natural",u=t[i+"Width"],g=t[i+"Height"];if("string"==typeof e&&(e=document.getElementById(e)),e&&"getContext"in e){o||(e.style.width=u+"px",e.style.height=g+"px"),e.width=u,e.height=g;var c=e.getContext("2d");c.clearRect(0,0,u,g),c.drawImage(t,0,0,t.naturalWidth,t.naturalHeight,0,0,u,g),isNaN(r)||r<1||(n?f(e,0,0,u,g,r):l(e,0,0,u,g,r))}}},t.imageDataRGB=g,t.imageDataRGBA=u,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=stackblur.min.js.map
