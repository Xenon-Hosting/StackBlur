function t(r){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(r)}function r(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(a=n.key,o=void 0,"symbol"==typeof(o=function(t,r){if("object"!=typeof t||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,r||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"))?o:String(o)),n)}var a,o;
/**
* StackBlur - a fast almost Gaussian Blur For Canvas
*
* In case you find this class useful - especially in commercial projects -
* I am not totally unhappy for a small donation to my PayPal account
* mario@quasimondo.de
*
* Or support me on flattr:
* {@link https://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript}.
*
* @module StackBlur
* @author Mario Klingemann
* Contact: mario@quasimondo.com
* Website: {@link http://www.quasimondo.com/StackBlurForCanvas/StackBlurDemo.html}
* Twitter: @quasimondo
*
* @copyright (c) 2010 Mario Klingemann
*
* Permission is hereby granted, free of charge, to any person
* obtaining a copy of this software and associated documentation
* files (the "Software"), to deal in the Software without
* restriction, including without limitation the rights to use,
* copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the
* Software is furnished to do so, subject to the following
* conditions:
*
* The above copyright notice and this permission notice shall be
* included in all copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
* OTHER DEALINGS IN THE SOFTWARE.
*/}function e(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var n=[512,128,114,64,82,114,335,64,405,82,271,114,97,335,73,64,227,405,91,82,149,271,124,114,105,97,90,335,78,73,273,64,241,227,107,405,383,91,345,82,78,149,71,271,259,124,475,114,437,105,101,97,187,90,347,335,323,78,151,73,141,273,265,64,497,241,117,227,441,107,417,405,197,383,373,91,177,345,337,82,80,78,305,149,291,71,139,271,265,259,507,124,485,475,465,114,223,437,107,105,103,101,99,97,381,187,367,90,177,347,341,335,329,323,159,78,307,151,297,73,287,141,139,273,269,265,261,64,505,497,489,241,475,117,461,227,447,441,435,107,211,417,411,405,399,197,389,383,189,373,92,91,359,177,175,345,341,337,83,82,81,80,79,78,309,305,301,149,147,291,287,71,281,139,137,271,67,265,131,259,257,507,501,124,491,485,120,475,235,465,115,114,451,223,221,437,433,107,106,105,104,103,102,101,100,99,98,97,385,381,377,187,185,367,363,90,357,177,175,347,86,341,169,335,83,329,163,323,80,159,315,78,155,307,76,151,299,297,147,73,289,287,285,141,70,139,275,273,271,269,267,265,263,261,259,64,509,505,501,497,493,489,243,241,239,475,471,117,116,461,457,227,451,447,111,441,219,435,108,107,425,211,419,417,207,411,102,405,201,399,397,197,391,389,193,383,381,189,94,373,371,92,183,91,361,359,357,177,88,175,347,345,343,341,339,337,167,83,165,82,163,81,161,80,159,79,157,78,155,309,307,305,303,301,299,149,74,147,73,291,289,287,143,71,141,281,279,139,69,137,273,271,135,67,267,265,66,131,261,259,129,257,255,507,126,501,499,124,493,491,122,485,483,120,239,475,473,235,117,465,463,115,229,114,453,451,449,223,111,221,439,437,435,433,431,107,213,106,211,105,209],a=[9,9,10,10,11,12,14,12,15,13,15,14,14,16,14,14,16,17,15,15,16,17,16,16,16,16,16,18,16,16,18,16,18,18,17,19,19,17,19,17,17,18,17,19,19,18,20,18,20,18,18,18,19,18,20,20,20,18,19,18,19,20,20,18,21,20,19,20,21,19,21,21,20,21,21,19,20,21,21,19,19,19,21,20,21,19,20,21,21,21,22,20,22,22,22,20,21,22,20,20,20,20,20,20,22,21,22,20,21,22,22,22,22,22,21,20,22,21,22,20,22,21,21,22,22,22,22,20,23,23,23,22,23,21,23,22,23,23,23,21,22,23,23,23,23,22,23,23,22,23,21,21,23,22,22,23,23,23,21,21,21,21,21,21,23,23,23,22,22,23,23,21,23,22,22,23,21,23,22,23,23,24,24,22,24,24,22,24,23,24,22,22,24,23,23,24,24,22,22,22,22,22,22,22,22,22,22,22,24,24,24,23,23,24,24,22,24,23,23,24,22,24,23,24,22,24,23,24,22,23,24,22,23,24,22,23,24,24,23,22,24,24,24,23,22,23,24,24,24,24,24,24,24,24,24,22,25,25,25,25,25,25,24,24,24,25,25,23,23,25,25,24,25,25,23,25,24,25,23,23,25,24,25,25,24,25,23,25,24,25,25,24,25,25,24,25,25,24,23,25,25,23,24,23,25,25,25,24,23,24,25,25,25,25,25,25,24,23,24,23,24,23,24,23,24,23,24,23,24,25,25,25,25,25,25,24,23,24,23,25,25,25,24,23,24,25,25,24,23,24,25,25,24,23,25,25,23,24,25,25,24,25,25,26,24,26,26,24,26,26,24,26,26,24,25,26,26,25,24,26,26,24,25,24,26,26,26,25,24,25,26,26,26,26,26,24,25,24,25,24,25];function o(t,r,e,n,a,o){if("string"==typeof t&&(t=document.getElementById(t)),t&&"naturalWidth"in t){var i=a?"offset":"natural",g=t[i+"Width"],v=t[i+"Height"];if("string"==typeof r&&(r=document.getElementById(r)),r&&"getContext"in r){o||(r.style.width=g+"px",r.style.height=v+"px"),r.width=g,r.height=v;var l=r.getContext("2d");l.clearRect(0,0,g,v),l.drawImage(t,0,0,t.naturalWidth,t.naturalHeight,0,0,g,v),isNaN(e)||e<1||(n?f(r,0,0,g,v,e):u(r,0,0,g,v,e))}}}function i(r,e,n,a,o){if("string"==typeof r&&(r=document.getElementById(r)),!r||"object"!==t(r)||!("getContext"in r))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var i=r.getContext("2d");try{return i.getImageData(e,n,a,o)}catch(t){throw new Error("unable to access image data: "+t)}}function f(t,r,e,n,a,o){if(!(isNaN(o)||o<1)){o|=0;var f=i(t,r,e,n,a);f=g(f,r,e,n,a,o),t.getContext("2d").putImageData(f,r,e)}}function g(t,r,e,o,i,f){for(var g,u=t.data,v=2*f+1,c=o-1,b=i-1,s=f+1,y=s*(s+1)/2,x=new l,m=x,p=1;p<v;p++)m=m.next=new l,p===s&&(g=m);m.next=x;for(var d=null,h=null,w=0,C=0,B=n[f],E=a[f],S=0;S<i;S++){m=x;for(var I=u[C],N=u[C+1],R=u[C+2],j=u[C+3],D=0;D<s;D++)m.r=I,m.g=N,m.b=R,m.a=j,m=m.next;for(var G=0,P=0,A=0,T=0,W=s*I,H=s*N,O=s*R,k=s*j,q=y*I,z=y*N,F=y*R,J=y*j,K=1;K<s;K++){var L=C+((c<K?c:K)<<2),M=u[L],Q=u[L+1],U=u[L+2],V=u[L+3],X=s-K;q+=(m.r=M)*X,z+=(m.g=Q)*X,F+=(m.b=U)*X,J+=(m.a=V)*X,G+=M,P+=Q,A+=U,T+=V,m=m.next}d=x,h=g;for(var Y=0;Y<o;Y++){var Z=J*B>>E;if(u[C+3]=Z,0!==Z){var $=255/Z;u[C]=(q*B>>E)*$,u[C+1]=(z*B>>E)*$,u[C+2]=(F*B>>E)*$}else u[C]=u[C+1]=u[C+2]=0;q-=W,z-=H,F-=O,J-=k,W-=d.r,H-=d.g,O-=d.b,k-=d.a;var _=Y+f+1;_=w+(_<c?_:c)<<2,q+=G+=d.r=u[_],z+=P+=d.g=u[_+1],F+=A+=d.b=u[_+2],J+=T+=d.a=u[_+3],d=d.next;var tt=h,rt=tt.r,et=tt.g,nt=tt.b,at=tt.a;W+=rt,H+=et,O+=nt,k+=at,G-=rt,P-=et,A-=nt,T-=at,h=h.next,C+=4}w+=o}for(var ot=0;ot<o;ot++){var it=u[C=ot<<2],ft=u[C+1],gt=u[C+2],ut=u[C+3],vt=s*it,lt=s*ft,ct=s*gt,bt=s*ut,st=y*it,yt=y*ft,xt=y*gt,mt=y*ut;m=x;for(var pt=0;pt<s;pt++)m.r=it,m.g=ft,m.b=gt,m.a=ut,m=m.next;for(var dt=o,ht=0,wt=0,Ct=0,Bt=0,Et=1;Et<=f;Et++){C=dt+ot<<2;var St=s-Et;st+=(m.r=it=u[C])*St,yt+=(m.g=ft=u[C+1])*St,xt+=(m.b=gt=u[C+2])*St,mt+=(m.a=ut=u[C+3])*St,Bt+=it,ht+=ft,wt+=gt,Ct+=ut,m=m.next,Et<b&&(dt+=o)}C=ot,d=x,h=g;for(var It=0;It<i;It++){var Nt=C<<2;u[Nt+3]=ut=mt*B>>E,ut>0?(ut=255/ut,u[Nt]=(st*B>>E)*ut,u[Nt+1]=(yt*B>>E)*ut,u[Nt+2]=(xt*B>>E)*ut):u[Nt]=u[Nt+1]=u[Nt+2]=0,st-=vt,yt-=lt,xt-=ct,mt-=bt,vt-=d.r,lt-=d.g,ct-=d.b,bt-=d.a,Nt=ot+((Nt=It+s)<b?Nt:b)*o<<2,st+=Bt+=d.r=u[Nt],yt+=ht+=d.g=u[Nt+1],xt+=wt+=d.b=u[Nt+2],mt+=Ct+=d.a=u[Nt+3],d=d.next,vt+=it=h.r,lt+=ft=h.g,ct+=gt=h.b,bt+=ut=h.a,Bt-=it,ht-=ft,wt-=gt,Ct-=ut,h=h.next,C+=o}}return t}function u(t,r,e,n,a,o){if(!(isNaN(o)||o<1)){o|=0;var f=i(t,r,e,n,a);f=v(f,r,e,n,a,o),t.getContext("2d").putImageData(f,r,e)}}function v(t,r,e,o,i,f){for(var g,u=t.data,v=2*f+1,c=o-1,b=i-1,s=f+1,y=s*(s+1)/2,x=new l,m=x,p=1;p<v;p++)m=m.next=new l,p===s&&(g=m);m.next=x;for(var d,h,w=null,C=null,B=n[f],E=a[f],S=0,I=0,N=0;N<i;N++){var R=u[I],j=u[I+1],D=u[I+2],G=s*R,P=s*j,A=s*D,T=y*R,W=y*j,H=y*D;m=x;for(var O=0;O<s;O++)m.r=R,m.g=j,m.b=D,m=m.next;for(var k=0,q=0,z=0,F=1;F<s;F++)d=I+((c<F?c:F)<<2),T+=(m.r=R=u[d])*(h=s-F),W+=(m.g=j=u[d+1])*h,H+=(m.b=D=u[d+2])*h,k+=R,q+=j,z+=D,m=m.next;w=x,C=g;for(var J=0;J<o;J++)u[I]=T*B>>E,u[I+1]=W*B>>E,u[I+2]=H*B>>E,T-=G,W-=P,H-=A,G-=w.r,P-=w.g,A-=w.b,d=S+((d=J+f+1)<c?d:c)<<2,T+=k+=w.r=u[d],W+=q+=w.g=u[d+1],H+=z+=w.b=u[d+2],w=w.next,G+=R=C.r,P+=j=C.g,A+=D=C.b,k-=R,q-=j,z-=D,C=C.next,I+=4;S+=o}for(var K=0;K<o;K++){var L=u[I=K<<2],M=u[I+1],Q=u[I+2],U=s*L,V=s*M,X=s*Q,Y=y*L,Z=y*M,$=y*Q;m=x;for(var _=0;_<s;_++)m.r=L,m.g=M,m.b=Q,m=m.next;for(var tt=0,rt=0,et=0,nt=1,at=o;nt<=f;nt++)I=at+K<<2,Y+=(m.r=L=u[I])*(h=s-nt),Z+=(m.g=M=u[I+1])*h,$+=(m.b=Q=u[I+2])*h,tt+=L,rt+=M,et+=Q,m=m.next,nt<b&&(at+=o);I=K,w=x,C=g;for(var ot=0;ot<i;ot++)u[d=I<<2]=Y*B>>E,u[d+1]=Z*B>>E,u[d+2]=$*B>>E,Y-=U,Z-=V,$-=X,U-=w.r,V-=w.g,X-=w.b,d=K+((d=ot+s)<b?d:b)*o<<2,Y+=tt+=w.r=u[d],Z+=rt+=w.g=u[d+1],$+=et+=w.b=u[d+2],w=w.next,U+=L=C.r,V+=M=C.g,X+=Q=C.b,tt-=L,rt-=M,et-=Q,C=C.next,I+=o}return t}var l=e((function t(){!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}));export{l as BlurStack,u as canvasRGB,f as canvasRGBA,o as image,v as imageDataRGB,g as imageDataRGBA};
//# sourceMappingURL=stackblur-es.min.js.map
